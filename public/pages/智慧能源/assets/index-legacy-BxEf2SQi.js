System.register(["./vuedraggable.umd-legacy-VED34mcE.js","./energyApi-legacy-6I-V7-GA.js","./index-legacy-Cgp3PKn6.js"],(function(a,e){"use strict";var l,t,n,d,o,r,u,i,s,c,p,v,g,b,m,y,x,f;return{setters:[null,a=>{l=a.a},a=>{t=a._,n=a.r,d=a.I,o=a.J,r=a.K,u=a.c,i=a.e,s=a.b,c=a.w,p=a.F,v=a.d,g=a.o,b=a.x,m=a.t,y=a.i,x=a.y,f=a.s}],execute:function(){var e=document.createElement("style");e.textContent=".container[data-v-3d78bad8]{margin:0 auto;padding:0;font-family:Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif}.page-header[data-v-3d78bad8]{margin-bottom:20px}h1[data-v-3d78bad8],h2[data-v-3d78bad8]{color:#303133;margin:0}.select-area[data-v-3d78bad8]{display:flex;align-items:center;gap:10px;padding-top:10px}.select-area .promptspan[data-v-3d78bad8],.select-area .duration-input[data-v-3d78bad8]{width:100px}.select-area .el-select[data-v-3d78bad8]{width:150px}.content-area[data-v-3d78bad8]{display:flex;gap:20px;margin-top:20px;width:100%}.original-list[data-v-3d78bad8],.editable-list[data-v-3d78bad8]{flex:1}.button-area[data-v-3d78bad8]{margin-top:20px;display:flex;gap:10px}.loading-content[data-v-3d78bad8]{display:flex;flex-direction:column;align-items:center;padding:20px}.loading-text[data-v-3d78bad8]{margin-top:20px;font-size:16px;color:#606266}.drag-handle[data-v-3d78bad8]{cursor:move}.item-content[data-v-3d78bad8]{display:flex;align-items:center;width:100%;gap:8px}\n",document.head.appendChild(e);const h={class:"container"},w={class:"select-area"},_={class:"content-area"},C={class:"scrollable-list"};a("default",t({__name:"index",setup(a){n(null);const e=n([]),t=n([]);n([]),n(105);const z=n("");n(""),n("");const S=n(!1);d((async()=>{await P()}));const V=async()=>{z.value&&(N.value=1,await H(),o.success(`成功加载 ${k.value} 的数据`))},P=async()=>{let a=await l.nox_company();200==a.code?e.value=a.data:o.error("nox_company:"+a.msg)},k=r((()=>{const a=e.value.find((a=>a.dictValue===z.value));return a?a.dictLabel:""}));n([]);const U=a=>{switch(a){case"1":return"success";case"2":return"primary";case"失败":return"danger";case"等待中":return"warning";default:return"info"}};n([{text:"已清洗",value:"1"},{text:"未清洗",value:"2"},{text:"进行中",value:"processing"}]);const H=async()=>{let a=await l.aodatepage({company:z.value,pageNum:N.value,pageSize:j.value});200==a.code?a.rows&&a.rows.length>0&&(F.value=a.total,I.value=a.rows.map(((a,e)=>({...a,statusShow:"1"==a.status?"已清洗":"等待中"})))):o.error("aodatelist:"+a.msg)},I=n([]),N=n(1),j=n(15);n(!1),n(!1),n(!0);const F=n(0),$=a=>{j.value=a,H()},A=a=>{N.value=a,H()};n([]);const L=async a=>{const e=a.target.files[0];e&&console.log("handleFileUpload……",e)},R=n(null),B=n(1),D=n(15),E=n(0),G=n({}),J=a=>{D.value=a,M()},K=a=>{B.value=a,M()},M=async()=>{t.value=[];let a=await l.filterRecordpage({aoDateId:G.value.id,pageNum:B.value,pageSize:D.value});200==a.code&&a.rows&&(E.value=a.total,a.rows&&a.rows.length>0&&(t.value=a.rows.map(((a,e)=>({...a})))))};return(a,l)=>{const n=v("el-option"),d=v("el-select"),o=v("el-table-column"),r=v("el-tag"),P=v("el-button"),k=v("el-table"),H=v("el-pagination"),T=v("el-card"),Y=v("el-dialog");return g(),u(p,null,[i("div",h,[i("div",w,[l[4]||(l[4]=i("span",{class:"promptspan"},"工厂名称：",-1)),s(d,{modelValue:z.value,"onUpdate:modelValue":l[0]||(l[0]=a=>z.value=a),placeholder:"请选择工厂名称",onChange:V,clearable:"",filterable:""},{default:c((()=>[(g(!0),u(p,null,b(e.value,(a=>(g(),x(n,{key:a.dictCode,label:a.dictLabel,value:a.dictValue},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),i("input",{type:"file",ref_key:"fileInput",ref:R,onChange:L,accept:".csv,.txt",style:{display:"none"}},null,544)]),i("div",_,[s(T,{class:"original-list"},{header:c((()=>l[5]||(l[5]=[i("h2",null,"数据清洗情况",-1)]))),default:c((()=>[i("div",C,[s(k,{data:I.value,style:{width:"100%"},border:""},{default:c((()=>[s(o,{prop:"index",label:"序号",width:"60"},{default:c((({$index:a})=>[i("span",null,m(a+1+(N.value-1)*j.value)+".",1)])),_:1}),s(o,{prop:"date",label:"文件名称"}),s(o,{prop:"status",label:"状态"},{default:c((({row:a})=>[s(r,{type:U(a.status)},{default:c((()=>[y(m(a.statusShow),1)])),_:2},1032,["type"])])),_:1}),s(o,{prop:"createTime",label:"清洗时间"}),s(o,{label:"操作",width:"160"},{default:c((({row:a})=>[1==a.filterRecordStatus?(g(),x(P,{key:0,type:"primary",size:"small",onClick:e=>(async a=>{S.value=!0,B.value=1,G.value=a,await M()})(a)},{default:c((()=>l[6]||(l[6]=[y(" 清洗记录 ")]))),_:2},1032,["onClick"])):f("",!0)])),_:1})])),_:1},8,["data"]),s(H,{currentPage:N.value,"onUpdate:currentPage":l[1]||(l[1]=a=>N.value=a),"page-size":j.value,total:F.value,layout:"total,prev, pager, next",onSizeChange:$,onCurrentChange:A},null,8,["currentPage","page-size","total"])])])),_:1})])]),s(Y,{modelValue:S.value,"onUpdate:modelValue":l[3]||(l[3]=a=>S.value=a),title:"清洗记录",width:"70%"},{default:c((()=>[s(k,{data:t.value,style:{width:"100%"},"highlight-current-row":""},{default:c((()=>[s(o,{prop:"index",label:"序号",width:"60"},{default:c((({$index:a})=>[i("span",null,m(a+1+(B.value-1)*D.value)+".",1)])),_:1}),s(o,{prop:"colName",label:"列名",width:"180"}),s(o,{prop:"symbol",label:"判断条件"}),s(o,{prop:"value",label:"值"}),s(o,{prop:"number",label:"过滤数据条数"})])),_:1},8,["data"]),s(H,{currentPage:B.value,"onUpdate:currentPage":l[2]||(l[2]=a=>B.value=a),"page-size":D.value,total:E.value,layout:"total,prev, pager, next",onSizeChange:J,onCurrentChange:K},null,8,["currentPage","page-size","total"])])),_:1},8,["modelValue"])],64)}}},[["__scopeId","data-v-3d78bad8"]]))}}}));
