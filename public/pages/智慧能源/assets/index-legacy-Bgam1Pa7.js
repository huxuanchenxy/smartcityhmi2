System.register(["./energyApi-legacy-6I-V7-GA.js","./index-legacy-Cgp3PKn6.js","./index-legacy-rjMJFdgK.js"],(function(a,e){"use strict";var l,t,n,i,o,d,r,s,u,c,p,v,g,b,m,x,w,f,y,h,C;return{setters:[a=>{l=a.a,t=a.G},a=>{n=a._,i=a.r,o=a.K,d=a.I,r=a.J,s=a.V,u=a.c,c=a.e,p=a.b,v=a.w,g=a.i,b=a.F,m=a.L,x=a.d,w=a.o,f=a.x,y=a.t,h=a.y,C=a.s},null],execute:function(){var e=document.createElement("style");e.textContent=".container[data-v-a49bab64]{margin:0 auto;padding:0;font-family:Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif}.page-header[data-v-a49bab64]{margin-bottom:20px}h1[data-v-a49bab64],h2[data-v-a49bab64]{color:#303133;margin:0}.select-area[data-v-a49bab64]{display:flex;align-items:center;gap:10px;padding-top:10px}.select-area[data-v-a49bab64]{display:flex;flex-direction:column;align-items:flex-start;gap:10px;padding-top:10px}.top-section[data-v-a49bab64]{display:flex;align-items:center;gap:10px}.time-range-section[data-v-a49bab64]{display:flex;gap:8px;align-items:center}.time-range-item[data-v-a49bab64]{display:flex;align-items:center;gap:10px}.select-area .duration-input[data-v-a49bab64]{width:100px}.select-area .el-select[data-v-a49bab64],.top-section2 .el-select[data-v-a49bab64],.top-section2 .el-input[data-v-a49bab64]{width:110px}.top-section2[data-v-a49bab64]{height:40px}.content-area[data-v-a49bab64]{display:flex;gap:20px;margin-top:20px;width:100%}.original-list[data-v-a49bab64],.editable-list[data-v-a49bab64]{flex:1}.button-area[data-v-a49bab64]{margin-top:20px;display:flex;gap:10px}.loading-content[data-v-a49bab64]{display:flex;flex-direction:column;align-items:center;padding:20px}.loading-text[data-v-a49bab64]{margin-top:20px;font-size:16px;color:#606266}.drag-handle[data-v-a49bab64]{cursor:move}.item-content[data-v-a49bab64]{display:flex;align-items:center;width:100%;gap:8px}.flex-container[data-v-a49bab64]{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:flex-start;align-items:center;gap:15px;position:relative;left:5px;bottom:5px}.empty-placeholder[data-v-a49bab64]{display:flex;flex-direction:column;align-items:center;justify-content:center;color:#999;font-size:14px}\n",document.head.appendChild(e);const _={class:"container"},V={class:"select-area"},z={class:"top-section"},Y={class:"content-area"},k={class:"scrollable-list"};a("default",n({__name:"index",setup(a){i(""),i(null);const e=i([]),n=i([]);i(null),i(null);const D=i("");i(""),i("");const S=i(""),M=i("");i(""),i(""),i(1e3),i(80),i(""),i(!1),i(""),i(!1),i(""),i(105),i(""),i("图片加载失败"),o((()=>I.value.datetimes?.length>0&&I.value.actuals?.length>0&&I.value.predicts?.length>0)),d((async()=>{await j()}));const P=async()=>{D.value&&(B.value=1,K.value=0,S.value="",M.value="",await L(),await U(),r.success(`成功加载 ${N.value} 的数据`))},j=async()=>{let a=await l.nox_company();200==a.code?e.value=a.data:r.error("nox_company:"+a.msg)},N=o((()=>{const a=e.value.find((a=>a.dictValue===D.value));return a?a.dictLabel:""}));i([]);const U=async()=>{try{E.value=[];let a=S.value?m(S.value).format("YYYY-MM-DD"):"",e=M.value?m(M.value).format("YYYY-MM-DD"):"",t=await l.aodatepage({company:D.value,pageNum:B.value,pageSize:J.value,startDate:a,endDate:e});200==t.code?t.rows&&t.rows.length>0&&(K.value=t.total,E.value=t.rows.map(((a,e)=>({...a})))):r.error("trainpage:"+t.msg)}catch(a){r.error("trainpage:"+a.message)}},L=async()=>{let a=await l.aodatelist({company:D.value});200==a.code?(F.value=[],a.data&&a.data.length>0&&a.data.forEach((a=>{F.value.push(a.date)}))):r.error("加载可用时间段出错:"+a.msg)},E=i([]),F=i([]);function H(a){const e=m(a).format("YYYY-MM-DD");return!F.value.includes(e)}i(!1);const R=i(!1);i(null),i(!1);const I=i({datetimes:["2023-12-09 00:00:00","2023-12-09 00:00:01","2023-12-09 00:00:02","2023-12-09 00:00:03"],actuals:["136.29754638671875","136.30165100097656","136.303955078125","136.3086700439453"],predicts:["136.29754638671875","136.30165100097656","136.303955078125","136.3086700439453"]}),$=i({}),A=async()=>{n.value=[];let a=await l.aoWarnpage({aoDateId:$.value.id,pageNum:W.value,pageSize:q.value});200==a.code&&a.rows&&(O.value=a.total,a.rows&&a.rows.length>0&&(n.value=a.rows.map(((a,e)=>({...a})))))};d((()=>{window.addEventListener("resize",G)})),s((()=>{window.removeEventListener("resize",G)}));const G=()=>{},B=i(1),J=i(15),K=i(0),W=i(1),q=i(15),O=i(0);i("");const Q=a=>{J.value=a,U()},T=a=>{B.value=a,U()},X=a=>{q.value=a,A()},Z=a=>{W.value=a,A()};t();const aa=async()=>D.value?S.value&&M.value&&S.value>M.value?(r.warning("开始时间不能大于结束时间"),S.value="",void(M.value="")):void 0:(r.warning("请先选择工厂"),S.value="",void(M.value=""));return(a,l)=>{const t=x("el-option"),i=x("el-select"),o=x("el-date-picker"),d=x("el-button"),s=x("el-table-column"),m=x("el-table"),j=x("el-pagination"),N=x("el-card"),L=x("el-dialog");return w(),u(b,null,[c("div",_,[c("div",V,[c("div",z,[l[8]||(l[8]=c("span",{class:"promptspan"},"工厂名称：",-1)),p(i,{modelValue:D.value,"onUpdate:modelValue":l[0]||(l[0]=a=>D.value=a),placeholder:"请选择工厂名称",onChange:P,clearable:"",filterable:""},{default:v((()=>[(w(!0),u(b,null,f(e.value,(a=>(w(),h(t,{key:a.dictCode,label:a.dictLabel,value:a.dictValue},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),l[9]||(l[9]=c("span",{class:"promptspan"},"筛选时间范围：",-1)),p(o,{modelValue:S.value,"onUpdate:modelValue":l[1]||(l[1]=a=>S.value=a),type:"date",placeholder:"开始时间",onFocus:aa,style:{width:"100%","max-width":"180px"},"disabled-date":H,align:"right"},null,8,["modelValue"]),l[10]||(l[10]=g(" 至 ")),p(o,{modelValue:M.value,"onUpdate:modelValue":l[2]||(l[2]=a=>M.value=a),type:"date","disabled-date":H,placeholder:"结束时间",onFocus:aa,style:{width:"100%","max-width":"180px"},align:"right"},null,8,["modelValue"]),p(d,{type:"primary",onClick:l[3]||(l[3]=a=>(async()=>{if(D.value)if(S.value>M.value)r.warning("结束时间要大于等于开始时间");else try{await U()}catch(a){console.log("取消保存",a)}else r.warning("请先选择工厂名称")})()),title:"请选择1.工厂名称 2. 筛选时间范围"},{default:v((()=>l[7]||(l[7]=[g(" 查询 ")]))),_:1})]),l[11]||(l[11]=c("div",{class:"time-range-section"},null,-1))]),c("div",Y,[p(N,{class:"original-list"},{header:v((()=>l[12]||(l[12]=[c("h2",null,"数据训练情况",-1)]))),default:v((()=>[c("div",k,[p(m,{data:E.value,style:{width:"100%"},border:""},{default:v((()=>[p(s,{prop:"index",label:"序号",width:"60"},{default:v((({$index:a})=>[c("span",null,y(a+1+(B.value-1)*J.value)+".",1)])),_:1}),p(s,{prop:"date",label:"训练时间"}),p(s,{prop:"cnt",label:"训练行数"}),p(s,{label:"操作",width:"160"},{default:v((({row:a})=>[1==a.warnStatus?(w(),h(d,{key:0,type:"primary",size:"small",onClick:e=>(async a=>{R.value=!0,W.value=1,$.value=a,await A()})(a)},{default:v((()=>l[13]||(l[13]=[g(" 报警历史 ")]))),_:2},1032,["onClick"])):C("",!0)])),_:1})])),_:1},8,["data"]),p(j,{currentPage:B.value,"onUpdate:currentPage":l[4]||(l[4]=a=>B.value=a),"page-size":J.value,total:K.value,layout:"total,prev, pager, next",onSizeChange:Q,onCurrentChange:T},null,8,["currentPage","page-size","total"])])])),_:1})])]),p(L,{modelValue:R.value,"onUpdate:modelValue":l[6]||(l[6]=a=>R.value=a),title:"报警历史",width:"70%"},{default:v((()=>[p(m,{data:n.value,style:{width:"100%"},onRowClick:a.handleRowClick,"row-class-name":a.tableRowClassName,"highlight-current-row":""},{default:v((()=>[p(s,{prop:"index",label:"序号",width:"60"},{default:v((({$index:a})=>[c("span",null,y(a+1+(W.value-1)*q.value)+".",1)])),_:1}),p(s,{prop:"warnStart",label:"报警时间",width:"180"}),p(s,{prop:"colName",label:"出现重复的列"}),p(s,{prop:"lineNum",label:"重复行数"})])),_:1},8,["data","onRowClick","row-class-name"]),p(j,{currentPage:W.value,"onUpdate:currentPage":l[5]||(l[5]=a=>W.value=a),"page-size":q.value,total:O.value,layout:"total,prev, pager, next",onSizeChange:X,onCurrentChange:Z},null,8,["currentPage","page-size","total"])])),_:1},8,["modelValue"])],64)}}},[["__scopeId","data-v-a49bab64"]]))}}}));
