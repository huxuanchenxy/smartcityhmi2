import{a as m}from"./energyApi-BelWF7_m.js";import{_ as $,r as s,K as z,I as x,J as f,c as S,e as i,b as l,w as t,d,o as A,i as p,t as v,N as F}from"./index-CjguSdL3.js";const J={class:"container"},L={class:"select-area"},P={class:"content-area"},j={class:"dialog-footer"},q={__name:"index",setup(G){s("");const b=s([]),u=s(!1),_=s(!1),w=s(null),N=s([]),k=s("");z(()=>{const o=N.value.find(e=>e.dictValue===k.value);return o?o.dictLabel:""}),x(async()=>{await g()});const g=async()=>{let o=await m.configlist();o.code==200?(b.value=[],o.data&&o.data.length>0&&(b.value=o.data.map((e,c)=>({...e})))):f.error("加载配置报错:"+o.msg)},n=s({company:"",colName:"",symbol:"",value:"",colId:""});s([]),s([]),x(()=>{});function C(){_.value=!1,w.value=null,n.value={configKey:"",configValue:"",configName:"",configId:""},u.value=!0}const I=async o=>{_.value=!0,w.value=o.configId;let e=await m.configSingle({id:o.configId});e.code==200&&(n.value={...e.data},u.value=!0)},B=async o=>{F.confirm("确定要删除这条数据吗?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{m.configdel({id:o.configId}).then(e=>{e.code==200?(f.success("删除成功"),g()):f.error("删除失败")})}).catch(()=>{f.info("已取消删除")})},K=async()=>{_.value?(await m.configupdate(n.value)).code==200&&(f.success("修改成功"),g()):(await m.configadd(n.value)).code==200&&(f.success("新增成功"),g()),u.value=!1};return(o,e)=>{const c=d("el-button"),r=d("el-table-column"),E=d("el-table"),D=d("el-card"),V=d("el-input"),y=d("el-form-item"),U=d("el-form"),M=d("el-dialog");return A(),S("div",J,[i("div",L,[l(c,{type:"primary",onClick:C},{default:t(()=>e[5]||(e[5]=[p("新增配置")])),_:1})]),i("div",P,[l(D,{class:"original-list"},{default:t(()=>[l(E,{data:b.value,border:"",style:{width:"100%"}},{default:t(()=>[l(r,{prop:"index",label:"序号",width:"60"},{default:t(({$index:a})=>[i("span",null,v(a+1),1)]),_:1}),l(r,{prop:"configKey",label:"配置键"},{default:t(a=>[i("span",null,v(a.row.configKey),1)]),_:1}),l(r,{prop:"configValue",label:"配置值"},{default:t(a=>[i("span",null,v(a.row.configValue),1)]),_:1}),l(r,{prop:"configName",label:"配置名称"},{default:t(a=>[i("span",null,v(a.row.configName),1)]),_:1}),l(r,{label:"操作",width:"150"},{default:t(a=>[l(c,{size:"small",onClick:T=>I(a.row)},{default:t(()=>e[6]||(e[6]=[p("修改")])),_:2},1032,["onClick"]),l(c,{size:"small",type:"danger",onClick:T=>B(a.row)},{default:t(()=>e[7]||(e[7]=[p("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})]),l(M,{modelValue:u.value,"onUpdate:modelValue":e[4]||(e[4]=a=>u.value=a),title:_.value?"编辑配置":"新增配置",width:"50%"},{footer:t(()=>[i("span",j,[l(c,{onClick:e[3]||(e[3]=a=>u.value=!1)},{default:t(()=>e[8]||(e[8]=[p("取消")])),_:1}),l(c,{type:"primary",onClick:K},{default:t(()=>e[9]||(e[9]=[p("确定")])),_:1})])]),default:t(()=>[l(U,{model:n.value,"label-width":"120px"},{default:t(()=>[l(y,{label:"配置键"},{default:t(()=>[l(V,{modelValue:n.value.configKey,"onUpdate:modelValue":e[0]||(e[0]=a=>n.value.configKey=a)},null,8,["modelValue"])]),_:1}),l(y,{label:"配置值"},{default:t(()=>[l(V,{modelValue:n.value.configValue,"onUpdate:modelValue":e[1]||(e[1]=a=>n.value.configValue=a)},null,8,["modelValue"])]),_:1}),l(y,{label:"配置名称"},{default:t(()=>[l(V,{modelValue:n.value.configName,"onUpdate:modelValue":e[2]||(e[2]=a=>n.value.configName=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},Q=$(q,[["__scopeId","data-v-c97376b3"]]);export{Q as default};
