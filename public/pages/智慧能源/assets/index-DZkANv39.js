import"./vuedraggable.umd-B0pI6CdV.js";import{a as y}from"./energyApi-BelWF7_m.js";import{_ as E,r as l,I as h,J as m,K as F,c as w,e as c,b as s,w as n,d as o,o as g,F as I,x as M,t as x,i as U,y as J}from"./index-CjguSdL3.js";const K={class:"container"},$={class:"select-area"},j={class:"content-area"},q={class:"scrollable-list"},A={__name:"index",setup(G){l(null);const p=l([]);l(105);const u=l("");h(async()=>{await P()});const C=async()=>{u.value&&(r.value=1,await _(),m.success("成功加载 ".concat(S.value," 的数据")))},P=async()=>{let e=await y.nox_company();e.code==200?p.value=e.data:m.error("nox_company:"+e.msg)},S=F(()=>{const e=p.value.find(a=>a.dictValue===u.value);return e?e.dictLabel:""}),_=async()=>{let e=await y.aodatepage({company:u.value,pageNum:r.value,pageSize:d.value});e.code==200?(v.value=[],e.rows&&e.rows.length>0&&(f.value=e.total,v.value=e.rows.map((a,b)=>({date:a.date,statusShow:a.status==1?"已导入":a.status==-1?"失败":"等待中",createTime:a.createTime,status:a.status})))):m.error("加载数据出错:"+e.msg)},v=l([]),r=l(1),d=l(15);l(!1),l(!1),l(!0);const f=l(0),V=e=>{switch(e){case"1":return"success";case"处理中":return"primary";case"失败":return"danger";case"等待中":return"warning";default:return"info"}},z=e=>{d.value=e,_()},L=e=>{r.value=e,_()};return h(()=>{}),(e,a)=>{const b=o("el-option"),T=o("el-select"),i=o("el-table-column"),k=o("el-tag"),B=o("el-table"),N=o("el-pagination"),D=o("el-card");return g(),w("div",K,[c("div",$,[a[2]||(a[2]=c("span",{class:"promptspan"},"工厂名称：",-1)),s(T,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=t=>u.value=t),placeholder:"请选择工厂名称",onChange:C,clearable:"",filterable:""},{default:n(()=>[(g(!0),w(I,null,M(p.value,t=>(g(),J(b,{key:t.dictCode,label:t.dictLabel,value:t.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),c("div",j,[s(D,{class:"original-list"},{header:n(()=>a[3]||(a[3]=[c("h2",null,"已导入的文件资源",-1)])),default:n(()=>[c("div",q,[s(B,{data:v.value,style:{width:"100%"},border:""},{default:n(()=>[s(i,{prop:"index",label:"序号",width:"60"},{default:n(({$index:t})=>[c("span",null,x(t+1+(r.value-1)*d.value)+".",1)]),_:1}),s(i,{prop:"date",label:"文件名称"}),s(i,{prop:"status",label:"状态"},{default:n(({row:t})=>[s(k,{type:V(t.status)},{default:n(()=>[U(x(t.statusShow),1)]),_:2},1032,["type"])]),_:1}),s(i,{prop:"createTime",label:"导入时间"})]),_:1},8,["data"]),s(N,{currentPage:r.value,"onUpdate:currentPage":a[1]||(a[1]=t=>r.value=t),"page-size":d.value,total:f.value,layout:"total,prev, pager, next",onSizeChange:z,onCurrentChange:L},null,8,["currentPage","page-size","total"])])]),_:1})])])}}},R=E(A,[["__scopeId","data-v-72f59737"]]);export{R as default};
